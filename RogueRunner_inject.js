(function(a,n){function d(a){var d=Array.prototype.slice.call(arguments);d.unshift("RogueBM[injection]: ");console.error.apply(console,d)}function p(b,f){var l=a.RogueBM.xDLStorage;l||d("Error injecting "+b," xDLStorage isn't loaded as a backup either",f);l.getScript(b,function(h){h.error&&d("Error loading script from xDLStorage",h.error);var e=document.createElement("script");e.setAttribute("type","text/javascript");e.appendChild(document.createTextNode(h.data));document.getElementsByTagName("head")[0].appendChild(e)})}function k(){var b=function(){var b=[],d,e="object"==typeof document&&document,a=e&&e.documentElement.doScroll,g=e&&(a?/^loaded|^c/:/^loaded|^i|^c/).test(e.readyState);return!g&&e&&e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d);for(g=1;d=b.shift();)d()}),function(d){g?setTimeout(d,0):b.push(d)}}(),f=function(a,h,e){var f,g=[],l=function(){for(var c=0;c<g.length;c++)f.postMessage(JSON.stringify(g[c]),"*");g=null};b(function(){var c=document.createElement("iframe");c.style.display="none";c.style.position="absolute";c.addEventListener("load",l);c.src=h;document.body.appendChild(c);try{f=c.contentWindow}catch(q){f=c.contentWindow}});var m={},k=function(c){if(e.includes(c.origin)){var a=JSON.parse(c.data);a.error&&d(a.error,c);if(null==a.messageID)d("need data.messageID for callbacks to function",c);else{var b=m[a.messageID];b?b.method!=b.method?d("methods do not match. Possible security risk"):(b.fn&&b.fn(a,c),m[a.messageID]=null,delete m[a.messageID]):d("no handler found for ",c.messageID,c)}}else d("rejected post message from",c.origin,"Allowed origins are",e)};a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k);this.getScript=function(c,a){this.postMessage({method:"getScript",url:c},a)};this.postMessage=function(c,a){for(var b=Array(17),d=0;15>d;d++)b[d]=(16*Math.random()|0).toString(16);b[15]="-";b[16]=Date.now();b=b.join("");c.messageID=b;m[b]={fn:a,method:c.method};null!=g?g.push(c):f.postMessage(JSON.stringify(c),"*")}};a.RogueBM.CrossOriginLocalStorage=f;a.RogueBM.xDLStorage=new f(a,"https://ktsuttlemyre.github.io/RogueBookmarklets/LocalStorage.html",["https://ktsuttlemyre.github.io"])}Date.now||(Date.now=function(){return(new Date).getTime()});a.RogueBM=a.RogueBM||{};if(window.RogueBM.show)return!a.RogueBM.CrossOriginLocalStorage&&k(),window.RogueBM.show();var b=document.createElement("script");b.setAttribute("src","https://ktsuttlemyre.github.io/RogueBookmarklets/RogueRunner_src.js?user="+n);b.setAttribute("type","text/javascript");b.setAttribute("crossorigin","anonymous");b.onerror=function(a){p(b.src,a)};document.getElementsByTagName("head")[0].appendChild(b);k()})(window,"anonymous");