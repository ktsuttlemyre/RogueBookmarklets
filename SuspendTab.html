<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="theme-color" content="#222531">
		<style>
		html, body{
			margin:0;
			padding:0;
			width:100%;
			height:100%;
		}
		.center {
		  display: block;
		  margin-left: auto;
		  margin-right: auto;
		}
		</style>
	</head>

	<body style="text-align:center">
		<div id="overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
			<div style="background: rgba(0,0,0,.8);display: inline-block;padding: 1em;border-radius: 1em;color: white;font-family: arial;margin-top: 4em;"><h1>Suspended tab</h1>
			<br><br>
			<h3 id="page_title"></h3>
			</div>
		</div>


		<script type="text/javascript">
			//https://johnresig.com/blog/search-and-dont-replace/
			function queryString(data){
			    var q = {}, ret = '';
			    data.replace(/([^=&]+)=([^&]*)/g, function(m, key, value){
				q[key] = (q[key] ? q[key] + ',' : '') + decodeURIComponent(value);
			    });
			    return q;
			}

			function showError(message){
				//statusBar.innerHTML=message
				var args = Array.prototype.slice.call( arguments );
				args.unshift("RogueBM[xDLStorageiFrame]: ");
				console.error.apply(console, args);
			}
			
			var SuspendTab={};
			
			var l=window.location.href;
			var hashQuery=l.substring(l.indexOf("#?") + 2);		
			var q=queryString(hashQuery);
			SuspendTab.unsuspend=function(){
				window.location.href=q.l;
			}
			
			//set title
			document.title=q.t+'[Suspended]';
			document.querySelectorAll("#page_title").textContent=q.t;
			
			var image = new Image();
			image.src=q.i;
			document.body.appendChild(image);
			image.onclick=(function(){
				SuspendTab.unsuspend();
			})
			image.style.width="100%";
			
			//actions
			if(q.onfocus){
				document.addEventListener("focus", SuspendTab.unsuspend, true);
			}
			if(q.onmousemove){
				document.body.onmousemove = SuspendTab.unsuspend;
			}
			
		</script>
	</body>
</html>
